{"version":3,"sources":["webpack://parallax/webpack/bootstrap","webpack://parallax/./src/parallax.js"],"names":["enumerable","get","getter","value","key","bind","module","Object","prototype","hasOwnProperty","call","object","property","nodes","last_call","events","throttle","event_names","ev","event","document","createEvent","initEvent","add","selector","options","_nodes","querySelectorAll","i","Array","slice","load","concat","node","parallax","properties","in_view","offset","attributes","settings","extract_settings","nodeValue","setting","push","values","opt","dispatchEvent","update","top","offsetTop","animation_state","visible_bottom","visible_top","styles","x","y","property_name","prop","length","indexOf","color_value_by_range","numeric_value_by_range","style_string","transform_string","style_name","color","r","g","b","style","update_all","now","Date","visible","parseInt","window","pageYOffset","height","innerHeight","bottom","visible_area","calculate_view_boundries","string","split","forEach","arr","trim","map","parseFloat","result","exec","range","prev","next","block","abs","Math","exports","init","addEventListener","setTimeout","pageXOffset"],"mappings":"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","file":"dist/parallax.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","function mapBetween(currentNum, minAllowed, maxAllowed, min, max) {\r\n  return (maxAllowed - minAllowed) * (currentNum- min) / (max - min) + minAllowed;\r\n}\r\n\r\nlet nodes = [],\r\n\tlast_call = false,\r\n\topts = {},\r\n\tevents = {},\r\n\tthrottle = 5;\r\n\r\nconst event_names = ['parallax/load', 'parallax/update'];\r\nfor(ev in event_names){\r\n\tlet event = document.createEvent('Event');\r\n\tevent.initEvent(event_names[ev], true, true);\r\n\tevents[event_names[ev]] = event;\r\n}\r\n\r\nfunction add(selector, options){\r\n\tlet _nodes = document.querySelectorAll(selector);\r\n\t_nodes = Array.prototype.slice.call(_nodes)\r\n\tfor(i in _nodes) load(_nodes[i], options)\r\n\tnodes = nodes.concat(_nodes)\r\n}\r\n\r\n// Sets up initial classes on nodes\r\nfunction load(node, options){\r\n\r\n\tnode.parallax = {\r\n\t\tproperties: [],\r\n\t\tin_view: [0.5, 1],\r\n\t\toffset: 0\r\n\t}\r\n\r\n\tif(node.attributes['parallax-options']){\r\n\t\tlet settings = node.attributes['parallax-options'] ? extract_settings(node.attributes['parallax-options'].nodeValue) : {};\r\n\t\tfor(setting in settings){\r\n\t\t\tnode.parallax[setting] = settings[setting]\r\n\t\t}\r\n\t}\r\n\r\n\tif(node.attributes['parallax']){\r\n\t\tlet settings = node.attributes['parallax'] ? extract_settings(node.attributes['parallax'].nodeValue, true) : {};\r\n\t\tfor(setting in settings){\r\n\t\t\tnode.parallax.properties.push({\r\n\t\t\t\tproperty: setting,\r\n\t\t\t\tvalues: settings[setting]\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tif(options){\r\n\t\tfor(opt in options){\r\n\t\t\tnode.parallax[opt] = options[opt]\r\n\t\t}\r\n\t}\r\n\r\n\tnode.dispatchEvent(events['parallax/load'])\r\n\r\n}\r\n\r\nfunction update(node){\r\n\r\n\tconst top = node.offsetTop;\r\n\tlet animation_state = 1 - ((1 / (node.parallax.visible_bottom - node.parallax.visible_top)) * (top - node.parallax.visible_top));\r\n\r\n\tif(animation_state > 1) animation_state = 1;\r\n\tif(animation_state < 0) animation_state = 0;\r\n\r\n\tlet styles = {x: 0, y: 0};\r\n\r\n\tfor(property_name in node.parallax.properties){\r\n\t\tlet prop = node.parallax.properties[property_name]\r\n\t\tlet value;\r\n\t\tif(animation_state === 0){\r\n\t\t\tvalue = prop.values[0]\r\n\t\t} else if(animation_state === 1) {\r\n\t\t\tvalue = prop.values[prop.values.length - 1]\r\n\t\t} else {\r\n\t\t\tif(['color','background-color'].indexOf(prop.property) !== -1){\r\n\t\t\t\tvalue = color_value_by_range(animation_state, prop.values)\r\n\t\t\t} else {\r\n\t\t\t\tvalue = numeric_value_by_range(animation_state, prop.values)\r\n\t\t\t}\r\n\t\t}\r\n\t\tstyles[prop.property] = value\r\n\t}\r\n\r\n\tlet style_string = '';\r\n\tlet transform_string = '';\r\n\r\n\tif(styles.color){\r\n\t\tstyle_string += 'color:rgb('+styles.color.r+','+styles.color.g+','+styles.color.b+');';\r\n\t}\r\n\tif(styles['background-color']){\r\n\t\tstyle_string += 'background-color:rgb('+styles['background-color'].r+','+styles['background-color'].g+','+styles['background-color'].b+');';\r\n\t}\r\n\r\n\tif(styles.x || styles.y){\r\n\t\ttransform_string += 'translate('+styles.x+'px,'+styles.y+'px)';\r\n\t}\r\n\r\n\tfor(style_name in styles){\r\n\t\tif(['y','x','color'].indexOf(style_name) !== -1) continue;\r\n\t\tif(['scale','rotate'].indexOf(style_name) !== -1) {\r\n\t\t\ttransform_string += ' '+style_name+'('+styles[style_name]+(style_name === 'rotate' ? 'deg' : '')+')';\r\n\t\t} else {\r\n\t\t\tstyle_string += style_name+':'+styles[style_name]+';';\r\n\t\t}\r\n\t}\r\n\r\n\tif(transform_string){\r\n\t\tstyle_string += 'transform:'+transform_string+';'\r\n\t}\r\n\r\n\r\n\tnode.style = style_string;\r\n\r\n\tnode.dispatchEvent(events['parallax/update'])\r\n\r\n}\r\n\r\nfunction update_all(){\r\n\tconst now = Date.now();\r\n\tif(last_call && now - last_call < throttle) return;\r\n\tlast_call = now;\r\n\tconst visible = visible_area()\r\n\tfor(i in nodes) {\r\n\t\tcalculate_view_boundries(nodes[i], visible)\r\n\t\tupdate(nodes[i])\r\n\t}\r\n}\r\n\r\n// Extracts setting values\r\nfunction extract_settings(string, property){\r\n\tlet settings = {};\r\n\tif(!string) return settings;\r\n\tstring.split(';').forEach(function(setting){\r\n\t\tlet arr = setting.trim().split(':')\r\n\t\tif(!arr[0]) return;\r\n\t\tlet key = arr[0].trim();\r\n\t\tlet value = arr[1] ? arr[1].trim() : true;\r\n\t\tif(['offset'].indexOf(key) !== -1) value = parseInt(value)\r\n\t\tif(['in_view'].indexOf(key) !== -1) value = value.split(',').map(function(value){ return parseFloat(value) })\r\n\t\tif(property){\r\n\t\t\tvalue = value.split(',').map(function(value){ return ['color','background-color'].indexOf(key) !== -1 ? hexToRgb(value) : parseFloat(value) })\r\n\t\t}\r\n\t\tsettings[key] = arr[1] ? value : true\r\n\t});\r\n\treturn settings;\r\n}\r\n\r\n// Calculate a numeric value by array of numbers\r\nfunction numeric_value_by_range(value, range){\r\n\tlet adjusted_value = value;\r\n\tlet prev = 0;\r\n\tlet next = 1;\r\n\tif(range.length > 2){\r\n\t\tconst block = 1 / range.length;\r\n\t\tfor(i in range){\r\n\t\t\ti = parseInt(i);\r\n\t\t\tlet perc = block * i\r\n\t\t\tif(perc > value){\r\n\t\t\t\tbreak;\r\n\t\t\t} else if(i > 0) {\r\n\t\t\t\tprev = i - 1\r\n\t\t\t\tnext = i\r\n\t\t\t}\r\n\t\t}\r\n\t\tvalue = (value - ((next) * block)) / block;\r\n\t\tif(value > 1) value = 1\r\n\t\tif(value < 0) value = 0\r\n\t}\r\n\tconst abs = Math.abs(range[next] - range[prev]);\r\n\tif(range[next] > range[prev]){\r\n\t\treturn (abs * value) + range[prev]\r\n\t} else {\r\n\t\treturn (abs - (abs * value)) + range[next];\r\n\t}\r\n}\r\n\r\n// Calculate a color value by array of numbers\r\nfunction color_value_by_range(value, range){\r\n\treturn {\r\n\t\tr: parseInt(numeric_value_by_range(value, range.map(function(color){ return color.r }))), \r\n\t\tg: parseInt(numeric_value_by_range(value, range.map(function(color){ return color.g }))), \r\n\t\tb: parseInt(numeric_value_by_range(value, range.map(function(color){ return color.b })))\r\n\t};\r\n}\r\n\r\n// Convert hex to rgb object\r\nfunction hexToRgb(hex) {\r\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n  return result ? {\r\n    r: parseInt(result[1], 16),\r\n    g: parseInt(result[2], 16),\r\n    b: parseInt(result[3], 16)\r\n  } : null;\r\n}\r\n\r\n// Is element within window bounds\r\nfunction calculate_view_boundries(node, visible){\r\n\tnode.parallax.visible_bottom = visible.top + (node.parallax.in_view[1] * visible.height);\r\n\tnode.parallax.visible_top = visible.top + (node.parallax.in_view[0] ? (visible.height * node.parallax.in_view[0]) : 0);\r\n}\r\n\r\n// Get visible area in window\r\nfunction visible_area(){\r\n\tlet y = parseInt(window.pageYOffset);\r\n\tlet height = parseInt(window.innerHeight);\r\n\treturn {top: y, bottom: y + height, height: height}\r\n}\r\n\r\nfunction bind(){\r\n\twindow.addEventListener('scroll', update_all)\r\n\twindow.addEventListener('resize', update_all)\r\n\twindow.setTimeout(function(){\r\n\t\tlet event = document.createEvent(\"Event\");\r\n\t\tevent.initEvent(\"scroll\", false, true); \r\n\t\tif(window.pageXOffset == 0) window.dispatchEvent(event);\r\n\t}, 60)\r\n}\r\n\r\nfunction init(){\r\n\tadd('[parallax]');\r\n\tbind();\r\n\tupdate_all();\r\n}\r\n\r\nmodule.exports = {\r\n\tinit: init,\r\n\tadd: add\r\n};"],"sourceRoot":""}